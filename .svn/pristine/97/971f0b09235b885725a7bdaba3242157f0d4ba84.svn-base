package ch1;


public class Test_Singleton {

	    private static Test_Singleton singleton_object;
	    private int counterValue;
	    
	    private Test_Singleton(){
	    }
	    
	    // synchronized: avoid simultaneous access from different threads 
	    public static synchronized Test_Singleton getSingletonObject() {
	        if (singleton_object == null) {
	        	singleton_object = new Test_Singleton();
	        }
	        return singleton_object;
	    }
	    
	    public int getCounter(){
	    	return counterValue;
	    }
	    
	    public synchronized void incrementCounter(){
	    	++counterValue;
	    }
	    
	    public Object clone() throws CloneNotSupportedException {
	    	throw new CloneNotSupportedException();
	    }

	    	public static void main(String args[]) {
	    		Test_Singleton obj1 = Test_Singleton.getSingletonObject();
	    		Test_Singleton obj2 = Test_Singleton.getSingletonObject();
	    		System.out.println(obj1.getCounter());
	    		System.out.println(obj2.getCounter());
	    		obj1.incrementCounter();
	    		System.out.println(obj1.getCounter());
	    		System.out.println(obj2.getCounter());
	    	}
}
